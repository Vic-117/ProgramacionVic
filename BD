--------------------------------------------------------
--  File created - martes-diciembre-09-2025   
--------------------------------------------------------
DROP TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."COLONIA";
DROP TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."DIRECCION";
DROP TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."ESTADO";
DROP TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."MUNICIPIO";
DROP TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."PAIS";
DROP TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."ROL";
DROP TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."TABLAINFO";
DROP TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIO";
DROP VIEW "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."VIEWGETUSUARIO";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."ADDUSUARIO";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."ALUMNODIRECCIONADD";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."BUSQUEDAUSUARIOS";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."DELETEUSUARIO";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETALLUSUARIO";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETCODIGOPOSTALBYCOLONIA";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETCOLONIABYMUNICIPIO";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETDIRECCIONBYID";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETDIRECCIONBYUSUARIO";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETESTADO";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETESTADOBYPAIS";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETMUNICIPIO";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETMUNICIPIOBYESTADO";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETPAIS";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETROLES";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETUSUARIODIRECCION";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."UPDATEDIRECCION";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."UPDATEUSUARIO";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIODIRECCIONDELETE";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIODIRECCIONGETALL";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIODURECCIONGETBYID";
DROP PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIOGETBYID";
--------------------------------------------------------
--  DDL for Table COLONIA
--------------------------------------------------------

  CREATE TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."COLONIA" 
   (	"IDCOLONIA" NUMBER(*,0) GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"NOMBRE" VARCHAR2(128), 
	"CODIGOPOSTAL" VARCHAR2(50), 
	"IDMUNICIPIO" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table DIRECCION
--------------------------------------------------------

  CREATE TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."DIRECCION" 
   (	"IDDIRECCION" NUMBER(*,0) GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"CALLE" VARCHAR2(50), 
	"NUMEROINTERIOR" VARCHAR2(20), 
	"NUMEROEXTERIOR" VARCHAR2(20), 
	"IDCOLONIA" NUMBER(*,0), 
	"IDUSUARIO" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table ESTADO
--------------------------------------------------------

  CREATE TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."ESTADO" 
   (	"IDESTADO" NUMBER(*,0) GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"NOMBRE" VARCHAR2(50), 
	"IDPAIS" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table MUNICIPIO
--------------------------------------------------------

  CREATE TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."MUNICIPIO" 
   (	"IDMUNICIPIO" NUMBER(*,0) GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"NOMBRE" VARCHAR2(50), 
	"IDESTADO" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table PAIS
--------------------------------------------------------

  CREATE TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."PAIS" 
   (	"IDPAIS" NUMBER(*,0) GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"NOMBRE" VARCHAR2(50)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table ROL
--------------------------------------------------------

  CREATE TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."ROL" 
   (	"IDROL" NUMBER GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"NOMBRE" VARCHAR2(50)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table TABLAINFO
--------------------------------------------------------

  CREATE TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."TABLAINFO" 
   (	"D_CODIGO" VARCHAR2(26), 
	"D_ASENTA" VARCHAR2(128), 
	"D_MNPIO" VARCHAR2(26), 
	"D_ESTADO" VARCHAR2(26), 
	"D_CIUDAD" VARCHAR2(26), 
	"D_CP" VARCHAR2(26)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table USUARIO
--------------------------------------------------------

  CREATE TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIO" 
   (	"IDUSUARIO" NUMBER GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"USERNAME" VARCHAR2(50), 
	"APELLIDOPATERNO" VARCHAR2(50), 
	"APELLIDOMATERNO" VARCHAR2(50), 
	"EMAIL" VARCHAR2(254), 
	"PASSWORD" VARCHAR2(50), 
	"FECHANACIMIENTO" DATE, 
	"IDROL" NUMBER, 
	"SEXO" CHAR(2), 
	"TELEFONO" VARCHAR2(20), 
	"CELULAR" VARCHAR2(20), 
	"CURP" VARCHAR2(50)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for View VIEWGETUSUARIO
--------------------------------------------------------

  CREATE OR REPLACE FORCE NONEDITIONABLE VIEW "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."VIEWGETUSUARIO" ("IDUSUARIO", "NOMBREUSUARIO", "NOMBREROL", "IDROL", "APELLIDOPATERNO", "APELLIDOMATERNO", "EMAIL", "FECHANACIMIENTO", "SEXO", "TELEFONO", "CELULAR", "CURP", "IDDIRECCION", "CALLE", "NUMEROINTERIOR", "NUMEROEXTERIOR", "NOMBRECOLONIA", "CODIGOPOSTAL", "MUNICIPIONOMBRE", "ESTADONOMBRE", "PAISNOMBRE") AS 
  SELECT   
    USUARIO.IDUSUARIO AS IDUSUARIO,
    USUARIO.USERNAME AS NOMBREUSUARIO,
    ROL.NOMBRE AS NOMBREROL,
    ROL.IDROL,
    USUARIO.APELLIDOPATERNO,
    USUARIO.APELLIDOMATERNO,
    USUARIO.EMAIL,
    USUARIO.FECHANACIMIENTO,
    USUARIO.SEXO,
    USUARIO.TELEFONO,
    USUARIO.CELULAR,
    USUARIO.CURP,
    DIRECCION.IDDIRECCION,
    DIRECCION.CALLE,
    DIRECCION.NUMEROINTERIOR,
    DIRECCION.NUMEROEXTERIOR,
    COLONIA.NOMBRE AS NOMBRECOLONIA,
    COLONIA.CODIGOPOSTAL, 
    MUNICIPIO.NOMBRE AS MUNICIPIONOMBRE,
    ESTADO.NOMBRE AS ESTADONOMBRE,
    PAIS.NOMBRE AS PAISNOMBRE
    FROM USUARIO
    INNER JOIN ROL ON USUARIO.IDROL = ROL.IDROL
    LEFT JOIN DIRECCION ON usuario.idusuario = direccion.idusuario
    LEFT JOIN COLONIA ON direccion.idcolonia = COLONIA.IDCOLONIA
    LEFT JOIN MUNICIPIO ON colonia.idmunicipio = municipio.idmunicipio
    LEFT JOIN ESTADO ON MUNICIPIO.IDESTADO = estado.idestado
    LEFT JOIN PAIS ON ESTADO.IDPAIS = pais.idpais
    ORDER BY IDUSUARIO
;
--------------------------------------------------------
--  DDL for Index UNI_EMAIL
--------------------------------------------------------

  CREATE UNIQUE INDEX "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."UNI_EMAIL" ON "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIO" ("EMAIL") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index UNI_USERNAME
--------------------------------------------------------

  CREATE UNIQUE INDEX "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."UNI_USERNAME" ON "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIO" ("USERNAME") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Procedure ADDUSUARIO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."ADDUSUARIO" (pUsername varchar2,pApellidoP varchar2,pApellidoM varchar2,pEmail varchar,
pPassword varchar2,pFechaNac DATE,pIdRol INTEGER,pSexo CHAR ,pTelefono VARCHAR2,pCelular VARCHAR,pCurp VARCHAR)
AS
BEGIN
    INSERT INTO USUARIO (USERNAME, APELLIDOPATERNO, APELLIDOMATERNO, EMAIL, PASSWORD, FECHANACIMIENTO,IDROL, SEXO, TELEFONO, CELULAR, CURP)
    VALUES(pUsername,pApellidoP,pApellidoM ,pEmail ,pPassword ,pFechaNac,pIdRol,pSexo ,pTelefono ,pCelular,pCurp);

END addUsuario;

/
--------------------------------------------------------
--  DDL for Procedure ALUMNODIRECCIONADD
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."ALUMNODIRECCIONADD" (
    PUSERNAME VARCHAR2,PAPELLIDOPATERNO VARCHAR2,PAPELLIDOMATERNO VARCHAR2,PEMAIL VARCHAR2,PPASSWORD VARCHAR2,
    PFECHANACIMIENTO DATE,PIDROL int,PSEXO CHAR,PTELEFONO VARCHAR2,PCELULAR VARCHAR2,PCURP VARCHAR2,
    PCALLE VARCHAR2,PNUMEROINTERIOR VARCHAR2,PNUMEROEXTERIOR VARCHAR2,PIDCOLONIA int    
)
AS
    vIdUsuario int;
BEGIN

    INSERT INTO USUARIO(USERNAME,APELLIDOPATERNO,APELLIDOMATERNO,EMAIL,PASSWORD,FECHANACIMIENTO,IDROL,SEXO,TELEFONO,CELULAR,CURP)
    VALUES(PUSERNAME,PAPELLIDOPATERNO,PAPELLIDOMATERNO,PEMAIL,PPASSWORD,PFECHANACIMIENTO,PIDROL,PSEXO,PTELEFONO,PCELULAR,PCURP)
    RETURNING IDUSUARIO INTO vIdUsuario;

    INSERT INTO DIRECCION(CALLE,NUMEROINTERIOR,NUMEROEXTERIOR,IDCOLONIA,IDUSUARIO)
    VALUES(PCALLE,PNUMEROINTERIOR,PNUMEROEXTERIOR,PIDCOLONIA,vIdUsuario);

END AlumnoDireccionAdd;

/
--------------------------------------------------------
--  DDL for Procedure BUSQUEDAUSUARIOS
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."BUSQUEDAUSUARIOS" (
pNombre VARCHAR2, pApellidoPaterno VARCHAR2,pApellidoMaterno VARCHAR2,pRol NUMBER,pCursor OUT SYS_REFCURSOR
)
AS
 ConsultaDinamica VARCHAR(4000);
BEGIN
    consultadinamica := 'SELECT IDUSUARIO,NOMBREUSUARIO, APELLIDOPATERNO, APELLIDOMATERNO,NOMBREROL,IDROL,EMAIL,FECHANACIMIENTO,SEXO,
    TELEFONO,CELULAR,CURP,IDDIRECCION,CALLE,NUMEROINTERIOR,NUMEROEXTERIOR, NOMBRECOLONIA,CODIGOPOSTAL,MUNICIPIONOMBRE, ESTADONOMBRE,PAISNOMBRE
    FROM viewGetUsuario ';

    consultadinamica := consultadinamica || 'WHERE LOWER(NOMBREUSUARIO) LIKE LOWER(''%''||:nombreUsuario||''%'') ';
     consultadinamica := consultadinamica || 'AND LOWER(APELLIDOPATERNO) LIKE LOWER(''%''||:apellidoPaterno||''%'') ';
    consultadinamica := consultadinamica ||'AND LOWER(APELLIDOMATERNO) LIKE LOWER(''%''||:apellidoMaterno||''%'') ';
    IF pRol <> 0 THEN    
    consultadinamica := consultadinamica ||'AND IDROL = :pRol';
    OPEN pCursor FOR ConsultaDinamica USING pNombre,pApellidoPaterno,pApellidoMaterno,pRol;
    ELSE
    OPEN pCursor FOR ConsultaDinamica USING pNombre,pApellidoPaterno,pApellidoMaterno;
    END IF;



END  busquedaUsuarios;

/
--------------------------------------------------------
--  DDL for Procedure DELETEUSUARIO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."DELETEUSUARIO" (pId number)
AS
BEGIN
    DELETE FROM Usuario
    WHERE idusuario = pId;

END deleteUsuario;

/
--------------------------------------------------------
--  DDL for Procedure GETALLUSUARIO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETALLUSUARIO" (
    pCursor OUT SYS_REFCURSOR
)
AS
BEGIN
    OPEN pCursor FOR
    SELECT 
    USUARIO.IDUSUARIO,
    USUARIO.USERNAME,
    USUARIO.APELLIDOPATERNO,
    USUARIO.APELLIDOMATERNO, 
    USUARIO.EMAIL,
    USUARIO.PASSWORD,
    USUARIO.FECHANACIMIENTO, 
    USUARIO.SEXO,
    USUARIO.TELEFONO,
    USUARIO.CELULAR,
    USUARIO.CURP ,
    USUARIO.IDROL,
    ROL.NOMBRE
    FROM USUARIO
    LEFT JOIN ROL ON ROL.IDROL = USUARIO.IDROL;
END getAllusuario;

/
--------------------------------------------------------
--  DDL for Procedure GETCODIGOPOSTALBYCOLONIA
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETCODIGOPOSTALBYCOLONIA" (
    pIdColonia IN int,
    pCursor OUT SYS_REFCURSOR
)
AS
BEGIN 
    OPEN pCursor FOR 
    SELECT IDCOLONIA,CODIGOPOSTAL FROM COLONIA
    WHERE pIdColonia = IDCOLONIA;

END getCodigoPostalByColonia;

/
--------------------------------------------------------
--  DDL for Procedure GETCOLONIABYMUNICIPIO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETCOLONIABYMUNICIPIO" (
    pIdMunicipio IN int,
    pCursor OUT SYS_REFCURSOR
)
AS
BEGIN

    OPEN pCursor FOR
    SELECT IDCOLONIA,NOMBRE,CODIGOPOSTAL FROM COLONIA
    WHERE  pIdMunicipio = IDMUNICIPIO;

END getColoniaByMunicipio;

/
--------------------------------------------------------
--  DDL for Procedure GETDIRECCIONBYID
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETDIRECCIONBYID" (
    pIdDireccion int,
    pCursor OUT SYS_REFCURSOR
    
)
AS
BEGIN

    OPEN pCursor FOR
    SELECT Direccion.IDDIRECCION,Direccion.CALLE,Direccion.NUMEROINTERIOR,Direccion.NUMEROEXTERIOR,
    Usuario.IDUSUARIO,PAIS.IDPAIS,ESTADO.IDESTADO,MUNICIPIO.IDMUNICIPIO,COLONIA.IDCOLONIA
    FROM DIRECCION
    INNER JOIN Usuario ON Usuario.IdUsuario = Direccion.IdUsuario
    INNER JOIN COLONIA ON DIRECCION.IDCOLONIA = COLONIA.IDCOLONIA
    INNER JOIN MUNICIPIO ON COLONIA.IDMUNICIPIO = MUNICIPIO.IDMUNICIPIO
    INNER JOIN ESTADO ON MUNICIPIO.IDESTADO = ESTADO.IDESTADO
    INNER JOIN PAIS ON ESTADO.IDPAIS = PAIS.IDPAIS

    WHERE IDDIRECCION =pIdDireccion;

END getDireccionById;

/
--------------------------------------------------------
--  DDL for Procedure GETDIRECCIONBYUSUARIO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETDIRECCIONBYUSUARIO" (
    pIdUsuario int,
    pCursor OUT SYS_REFCURSOR
)
AS 
BEGIN
    OPEN pCursor FOR
    SELECT USUARIO.IDUSUARIO, DIRECCION.IDDIRECCION FROM USUARIO 
    INNER JOIN DIRECCION ON USUARIO.IDUSUARIO = DIRECCION.IDUSUARIO
    WHERE pIdUsuario = DIRECCION.IDUSUARIO;
END getDireccionByUsuario;

/
--------------------------------------------------------
--  DDL for Procedure GETESTADO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETESTADO" (
    pIdPais IN int,
    pCursor OUT SYS_REFCURSOR
)
AS
BEGIN

    OPEN pCursor FOR
    SELECT IDESTADO,NOMBRE FROM ESTADO 
    WHERE  pIdPais = IDPAIS;

END getEstado;

/
--------------------------------------------------------
--  DDL for Procedure GETESTADOBYPAIS
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETESTADOBYPAIS" (
    pIdPais IN int,
    pCursor OUT SYS_REFCURSOR
)
AS
BEGIN

    OPEN pCursor FOR
    SELECT IDESTADO,NOMBRE FROM ESTADO 
    WHERE  pIdPais = IDPAIS;

END getEstadoByPais;

/
--------------------------------------------------------
--  DDL for Procedure GETMUNICIPIO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETMUNICIPIO" (
    pIdEstado IN int,
    pCursor OUT SYS_REFCURSOR
)
AS
BEGIN

    OPEN pCursor FOR
    SELECT IDMUNICIPIO,NOMBRE FROM MUNICIPIO
    WHERE  pIdEstado = IDESTADO;

END getMunicipio;

/
--------------------------------------------------------
--  DDL for Procedure GETMUNICIPIOBYESTADO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETMUNICIPIOBYESTADO" (
    pIdEstado IN int,
    pCursor OUT SYS_REFCURSOR
)
AS
BEGIN

    OPEN pCursor FOR
    SELECT IDMUNICIPIO,NOMBRE FROM MUNICIPIO
    WHERE  pIdEstado = IDESTADO;

END getMunicipioByEstado;

/
--------------------------------------------------------
--  DDL for Procedure GETPAIS
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETPAIS" (
    pCursor OUT SYS_REFCURSOR
)
AS
BEGIN
    OPEN pCursor FOR
    SELECT IDPAIS, NOMBRE
    FROM PAIS;
END;

/
--------------------------------------------------------
--  DDL for Procedure GETROLES
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETROLES" (
    pCursor OUT SYS_REFCURSOR
)
AS
BEGIN
    OPEN pCursor FOR
    SELECT IDROL, NOMBRE FROM ROL;

END;

/
--------------------------------------------------------
--  DDL for Procedure GETUSUARIODIRECCION
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."GETUSUARIODIRECCION" (
 pCursor OUT SYS_REFCURSOR
)
AS
BEGIN

   OPEN pCursor FOR
   SELECT 
        DIRECCION.CALLE,
        DIRECCION.NUMEROINTERIOR,
        DIRECCION.NUMEROEXTERIOR,    
        USUARIO.IDUSUARIO,
        USUARIO.USERNAME,
        USUARIO.APELLIDOPATERNO,
        USUARIO.APELLIDOMATERNO
    FROM DIRECCION
    RIGHT JOIN USUARIO ON direccion.idusuario = usuario.idusuario;

END getUsuarioDireccion;

/
--------------------------------------------------------
--  DDL for Procedure UPDATEDIRECCION
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."UPDATEDIRECCION" (
    PIDDIRECCION INT,
    PCALLE VARCHAR2,
    PNoInterior VARCHAR2,
    PNoExterior VARCHAR2,
    PPAIS VARCHAR2,
    PESTADO VARCHAR2,
    PMUNICIPIO VARCHAR2,
    PCOLONIA VARCHAR2
)
AS
vIdColonia int;
vIdMunicipio int;
vIdEstado int;
vIdPais int;
BEGIN
    UPDATE DIRECCION
    SET CALLE = PCALLE,
    NUMEROINTERIOR = PNoInterior,
    NUMEROEXTERIOR = PNoExterior 
    WHERE IDDIRECCION = PIDDIRECCION
    RETURNING DIRECCION.IDCOLONIA INTO vIdColonia;

    UPDATE COLONIA
    SET COLONIA.NOMBRE = PCOLONIA
    WHERE COLONIA.IDCOLONIA = vIdColonia
    RETURNING COLONIA.IDMUNICIPIO INTO vIdMunicipio;

    UPDATE MUNICIPIO
    SET MUNICIPIO.NOMBRE = PMUNICIPIO
    WHERE MUNICIPIO.IDMUNICIPIO = vIdMunicipio
    RETURNING MUNICIPIO.IDESTADO INTO vIdEstado;

    UPDATE ESTADO
    SET ESTADO.NOMBRE = PESTADO
    WHERE ESTADO.IDESTADO = vIdEstado
    RETURNING ESTADO.IDPAIS INTO vIdPais;

    UPDATE PAIS
    SET PAIS.NOMBRE = PPAIS
    WHERE PAIS.idpais = vIdPais;

END;

/
--------------------------------------------------------
--  DDL for Procedure UPDATEUSUARIO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."UPDATEUSUARIO" (
    pIdusuario int,
    pUsername VARCHAR2,
    pApellidoP VARCHAR2,
    pApellidoM VARCHAR2,
    pEmail VARCHAR2,
    pPassword VARCHAR2,
    pFechaNac DATE,
    pIdrol int,
    pSexo VARCHAR2,
    ptelefono VARCHAR2,
    pCelular VARCHAR2,
    pCurp VARCHAR2
)
AS
BEGIN
    UPDATE USUARIO
    SET USERNAME = pUsername,
     APELLIDOPATERNO = pApellidoP ,
    APELLIDOMATERNO = pApellidoM,
    EMAIL = pEmail ,
    PASSWORD = pPassword ,
    FECHANACIMIENTO = pFechaNac ,
    IDROL = pIdrol ,
    SEXO = pSexo ,
    TELEFONO = ptelefono ,
    CELULAR = pCelular ,
    CURP = pCurp 
    WHERE IDUSUARIO = pIdusuario;
END updateUsuario;

/
--------------------------------------------------------
--  DDL for Procedure USUARIODIRECCIONDELETE
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIODIRECCIONDELETE" (
    PIDUSUARIO int
)
AS
vIdUsuario int;
BEGIN

    DELETE FROM DIRECCION
    WHERE PIDUSUARIO = direccion.idusuario
    RETURNING DIRECCION.IDUSUARIO INTO vIdUsuario;


    DELETE FROM USUARIO 
    WHERE USUARIO.idusuario = vIdUsuario;




END UsuarioDireccionDelete;

/
--------------------------------------------------------
--  DDL for Procedure USUARIODIRECCIONGETALL
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIODIRECCIONGETALL" (
    pCursor OUT SYS_REFCURSOR
)
AS
BEGIN
    OPEN pCursor FOR
    SELECT 
    USUARIO.IDUSUARIO,
    USUARIO.USERNAME AS NOMBREUSUARIO,
    USUARIO.IDROL,
    USUARIO.APELLIDOPATERNO,
    USUARIO.APELLIDOMATERNO,
    USUARIO.EMAIL,
    USUARIO.FECHANACIMIENTO,
    USUARIO.SEXO,
    USUARIO.TELEFONO,
    USUARIO.CELULAR,
    USUARIO.CURP,
    DIRECCION.IDDIRECCION,
    DIRECCION.CALLE,
    DIRECCION.NUMEROINTERIOR,
    DIRECCION.NUMEROEXTERIOR,
    COLONIA.NOMBRE AS NOMBRECOLONIA,
    COLONIA.CODIGOPOSTAL, 
    MUNICIPIO.NOMBRE AS MUNICIPIONOMBRE,
    ESTADO.NOMBRE AS ESTADONOMBRE,
    PAIS.NOMBRE AS PAISNOMBRE
    FROM USUARIO
    INNER JOIN ROL ON USUARIO.IDROL = ROL.IDROL
    LEFT JOIN DIRECCION ON usuario.idusuario = direccion.idusuario
    LEFT JOIN COLONIA ON direccion.idcolonia = COLONIA.IDCOLONIA
    LEFT JOIN MUNICIPIO ON colonia.idmunicipio = municipio.idmunicipio
    LEFT JOIN ESTADO ON MUNICIPIO.IDESTADO = estado.idestado
    LEFT JOIN PAIS ON ESTADO.IDPAIS = pais.idpais
    ORDER BY IDUSUARIO DESC;

END UsuarioDireccionGetAll;

/
--------------------------------------------------------
--  DDL for Procedure USUARIODURECCIONGETBYID
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIODURECCIONGETBYID" (
    pIdUsuario int,
    pCursor OUT SYS_REFCURSOR
)
AS
BEGIN
    OPEN pCursor FOR
    SELECT Usuario.IdUsuario,USERNAME,APELLIDOPATERNO,APELLIDOMATERNO,EMAIL,PASSWORD,FECHANACIMIENTO,IDROL,SEXO,TELEFONO,CELULAR,CURP,DIRECCION.IDDIRECCION,
    DIRECCION.CALLE,DIRECCION.NUMEROINTERIOR,DIRECCION.NUMEROEXTERIOR,DIRECCION.IDCOLONIA
    FROM USUARIO
    LEFT JOIN DIRECCION ON USUARIO.IDUSUARIO = direccion.idusuario
    WHERE DIRECCION.IDUSUARIO = pIdUsuario;

END;

/
--------------------------------------------------------
--  DDL for Procedure USUARIOGETBYID
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIOGETBYID" (
    PIDUSUARIO INT,
    pCursor OUT SYS_REFCURSOR
 
)
AS
BEGIN

    Open pCursor FOR
    SELECT IDUSUARIO,USERNAME,APELLIDOPATERNO,APELLIDOMATERNO,EMAIL,PASSWORD,FECHANACIMIENTO,ROL.IDROL,ROL.NOMBRE AS NOMBREROL,SEXO,TELEFONO,CELULAR,CURP
    FROM USUARIO
    LEFT JOIN ROL ON USUARIO.IDROL = ROL.IDROL
    WHERE IDUSUARIO = PIDUSUARIO;

END UsuarioGetById;

/
--------------------------------------------------------
--  Constraints for Table DIRECCION
--------------------------------------------------------

  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."DIRECCION" MODIFY ("IDDIRECCION" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."DIRECCION" MODIFY ("CALLE" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."DIRECCION" MODIFY ("NUMEROEXTERIOR" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."DIRECCION" MODIFY ("IDCOLONIA" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."DIRECCION" MODIFY ("IDUSUARIO" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."DIRECCION" ADD PRIMARY KEY ("IDDIRECCION")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table ESTADO
--------------------------------------------------------

  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."ESTADO" MODIFY ("IDESTADO" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."ESTADO" MODIFY ("NOMBRE" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."ESTADO" ADD PRIMARY KEY ("IDESTADO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table ROL
--------------------------------------------------------

  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."ROL" MODIFY ("IDROL" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."ROL" ADD PRIMARY KEY ("IDROL")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table USUARIO
--------------------------------------------------------

  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIO" MODIFY ("IDUSUARIO" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIO" ADD PRIMARY KEY ("IDUSUARIO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIO" MODIFY ("SEXO" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIO" MODIFY ("USERNAME" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIO" MODIFY ("APELLIDOPATERNO" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIO" MODIFY ("PASSWORD" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIO" MODIFY ("EMAIL" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIO" MODIFY ("TELEFONO" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIO" MODIFY ("FECHANACIMIENTO" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIO" ADD CONSTRAINT "UNI_USERNAME" UNIQUE ("USERNAME")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIO" ADD CONSTRAINT "UNI_EMAIL" UNIQUE ("EMAIL")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table PAIS
--------------------------------------------------------

  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."PAIS" MODIFY ("IDPAIS" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."PAIS" MODIFY ("NOMBRE" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."PAIS" ADD PRIMARY KEY ("IDPAIS")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table MUNICIPIO
--------------------------------------------------------

  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."MUNICIPIO" MODIFY ("IDMUNICIPIO" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."MUNICIPIO" MODIFY ("NOMBRE" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."MUNICIPIO" MODIFY ("IDESTADO" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."MUNICIPIO" ADD PRIMARY KEY ("IDMUNICIPIO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table COLONIA
--------------------------------------------------------

  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."COLONIA" MODIFY ("IDCOLONIA" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."COLONIA" MODIFY ("NOMBRE" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."COLONIA" MODIFY ("CODIGOPOSTAL" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."COLONIA" MODIFY ("IDMUNICIPIO" NOT NULL ENABLE);
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."COLONIA" ADD PRIMARY KEY ("IDCOLONIA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table COLONIA
--------------------------------------------------------

  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."COLONIA" ADD CONSTRAINT "FK_IDMUNICIPIO" FOREIGN KEY ("IDMUNICIPIO")
	  REFERENCES "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."MUNICIPIO" ("IDMUNICIPIO") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table DIRECCION
--------------------------------------------------------

  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."DIRECCION" ADD CONSTRAINT "FK_IDUSUARIO" FOREIGN KEY ("IDUSUARIO")
	  REFERENCES "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIO" ("IDUSUARIO") ENABLE;
  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."DIRECCION" ADD CONSTRAINT "FK_IDCOLONIA" FOREIGN KEY ("IDCOLONIA")
	  REFERENCES "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."COLONIA" ("IDCOLONIA") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table ESTADO
--------------------------------------------------------

  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."ESTADO" ADD CONSTRAINT "FK_IDPAIS" FOREIGN KEY ("IDPAIS")
	  REFERENCES "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."PAIS" ("IDPAIS") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table MUNICIPIO
--------------------------------------------------------

  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."MUNICIPIO" ADD CONSTRAINT "FK_IDESTADO" FOREIGN KEY ("IDESTADO")
	  REFERENCES "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."ESTADO" ("IDESTADO") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table USUARIO
--------------------------------------------------------

  ALTER TABLE "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."USUARIO" ADD CONSTRAINT "IDROL" FOREIGN KEY ("IDROL")
	  REFERENCES "VPEREZPROGRAMACIONNCAPASNOVIEMBRE25"."ROL" ("IDROL") ENABLE;
